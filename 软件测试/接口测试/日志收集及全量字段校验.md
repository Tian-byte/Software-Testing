1. 借助测试套件生成测试报告
2. 使用logging 实现日志收集’
3. 使用jsonschema库对响应数据进行全字段校验

### 获取请求头



### 提取项目目录



### 生成测试报告

**步骤**



**实现**







# 日志收集

### 日志简介

1. 日志 用于记录系统运行的信息，对一个事情的记录，也称为Log
2. 打印的日志 需要记录的信息：
   - 脚本运行过程中的某个重要变量的值
   - 方法的输入参数和返回结果
   - 异常信息
3. 日志作用
   - 了解系统程序运行的情况，是否正常
   - 系统程序运行故障分析与问题定位
   - 用来做用户行为分析和数据统计

### 日志的级别

日志简介

- 什么是日志
  - 日志也叫 log 通常对应xxx.log 的日志文件。 文件的作用是记录系统运行过程中，产生的信息
- 搜集日志的作用
  - 查看系统运行是否正常
  - 分析 定位bug

### 日志的级别（从上到下 级别一次减少）、

1. debug 调试级别  打印非常详细的日志信息，通常用于调试
2. info 信息级别，一般用于记录突出强调的运行过程步骤
3. warning 警告级别 可能出现潜在错误的情况，一般不印象系统使用
4. error 错误级别 打印错误信息，出现BUG
5. critical 严重错误级别，系统可能已经无法运行

### 日志代码实现分析

``` te	
	不要求会写
```



![image-20240903204805984](E:\Software-Testing\软件测试\接口测试\img\image-20240903204805984.png)

使用：

1. 调用函数 init_log_config() 函数，初始化 日志信息
2.  指定日志级别  打印 日志信息

# 全量字段校验

简介和安装

- 概念：校验接口返回相应结果的全部字段（跟进一步的断言）
- 校验内容：
  - 字段名
  - 字段值 或 字段类型
- 校验流程：
  - 定义json 语法校验格式
  - 比较接口相应数据是否否和 json 校验格式‘
- 安装jsonschema:
  - pip install jsonschema -i https://pypi.doban.com/simple/





校验规则描述

- 整个JSON数据是一个对象
- 包含success code message 字段 并且是必须存在的字段
- success 必须是bool型
- code 为整数
- message 为字符串

```json
{
  "type":"object",
  "properties":{
    "success":{"type":"boolean"},
    "code":{"type":"interger"},
    "message":{"type":"string"}
  },
  "required":{"success","code","message"}
}
```



### python 代码校验

实现步骤：

1. 导包 import jsonschema
2. 定义 jsonschema格式 数据校验’
3. 调用 jsonschema.validate(instance = "json 数据"，schema="jsonsheman规则")

检查校验结果：

- 校验通过： 返回None

- 校验失败

  - schema 规则错误，返回 SchemaError
  - json 数据错误 返回 VaildationError

  案例：

  ```python
  #  导包
  import jsonschema
  
  # 创建 校验规则
  schema = {
      "type":"object",
      "properties":{
          "success":{
              "type":"boolean"
          },
          "code":{
              "type":"integer"
          },
          "message":{
              "type":"string"
          }
      },
      "required":["success","code","message"]
  
  }
  
  
  # 准备待测数据校验
  data = {
      "success":True,
      "code":10000,
      "message":"操作成功"
  }
  
  # 调用 volidate 方法 ，实现校验
  
  print(jsonschema.validate(instance=data, schema=schema))
  # 返回 None 校验通过
  ```

### Jsonschema(重点关键字)

- type 表示待校验元素的类型
- properties 待校验的Json 对象中，各个 key-value 对中的value的限制
- required 定义待校验的JSON对象，必须存在的key
- const  json元素 必须等于指定的内容  类似于断言 
- patterm 使用正则表达式约束字符串类型数据  正则表达式 专门处理字符串的 ！ @ 这些符号 对字符串数据进行筛选



### type关键字

作用： 约束数据类型







