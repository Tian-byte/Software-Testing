金融项目的特点：

1. 复杂的业务逻辑

2. 依赖于第三方接口

3. 加快加解密

   



- 回顾接口相关理论
- 分析api文档
- 测试点提取
- 用例编写



# 接口测试流程梳理

### ui 功能测试和接口测试那个先执行

- 接口测试先执行
- 原因： ui功能测试需要等待前端页面完成，后台接口开发完成，且前后端联调完成

### ui功能测试与接口测试的区别：（前端有js干扰）

- ui功能：功能的调用 + 页面布局  + 兼容
- 接口测试：  完整的测试服务端功能验证

### ui功能测试和接口测试那个效率更高

- 接口测试效率更高
- 接口测试只测服务端以及没有多页面操作的因素

### 接口测试流程

- 需求分析与评审
- 设计测试计划和方案
- 分析api文档
- 编写用例（搭建环境）
- 执行测试用例
- bug 的记录与追踪
- 编写测试报告





###  分析api文档

- 测试接口依赖的数据是否都明确（请求响应）
- 分析接口之间的依赖关系及关联
- 参数规则（类型，是否必填，长度，等等）说明



### 项目难点 

- 认证接口请求头使用 multipart/form-data
- 三方开户  三方充值   三方投资  都需要调用 Mock接口
- url  来源 action的值
- 请求参数和值： 所有的input 标签中name 属性值为参数名，value 属性为参数值























# 接口测试点梳理以及用例设计

重点测试投资流程相关接口，接口梳理如下：

- 注册
- 登录
- 开通托管账户
- 充值
- 投资产品列表
- 投资产品详情
- 投资





接口用例设计方法

- 单接口

  - 必填参数组合
  - 必填参数 + 非必填参数
    - 全部参数组合
    - 有关联参数组合
    - 其他参数组合
  - 反向测试
    - 功能异常
      - 覆盖反向需求，需求响应状态码错误
    - 数据异常
      - 空   类型不否  长度不够
    - 参数异常
      - 多参 少参  无参

- 业务场景测试

  - 从功能业务用例转换 p0
    - 针对业务功能用例中操作步骤，分析对应的接口请求
  - 优先级  p0 > p1 > p2 > p3

  













# 环境准备

- 搭建环境的两项（项目和工具）

### 接口测试流程

- 需求分析与评审
- 设计测试计划和方案
- 分析api 接口文档
- 设计测试用例
- 环境搭建
- 脚本编写
- 执行测试用例
- bug 的追踪
- 写测试报告

### 环境说明

1. 项目环境
2. 测试工具环境



项目环境搭建

- 申请/购买服务器，并安装操作系统
- 安装基础软件   jdk mysql  tomcat
- 打包  并上传到服务器
- 启动项目



三方接口如何解决？

- 使用mock   （模拟接口）



1. Mock说明

   - mock 是模拟接口
   - 什么场景下会mock  
     - 依赖的接口未实现
     - 依赖的接口响应速度慢
     - 针对接口模拟各种异常

2. 如何去实现？

   - 使用mock 现有的工具  ---》 moco
   - 自定义mock 
     - 例如 编写一个函数直接return 模拟的值
     - 使用接口开发框架  编写要模拟得接口  flask

3. 需求场景

   - 模拟一个登录接口，在api文档中说明如果登录成功  返回状态码:200 {"status":200,"msg":"登录成功！"}
   - 失败  返回  返回状态码:200 {"status":200,"msg":"用户名或密码错误！"}

   问题开发还没有实现登录接口，那么依赖应该如何解决？

   - 

   - ```python
     from flask import Flask
     
     app = Flask(__name__)
     # 定义接口
     @app.route("/login",methods=["get","post"])
     def login():
         return {"status":200,"msg":"登录成功！","token":"xxx123123123"}
     
     app.run()
     ```





### 面试题

测试数据准备方式：

- 手动进行系统数据构造
  - 要求对功能已经实现
  - 效率比较低
  - 适合不需要频繁构造的数据
- 调用其他接口构造
  - 依赖数据准备接口的正确性
  - 接口用例中各个api的耦合度比较高
- 直接操作数据库
  - 比较灵活
  - 对数据库的表的结构熟悉程度要求比较高（某一个接口的数据准可能涉及到多张表）
  - 数据库表结构发送变化了，可能导致之前的用例执行失败





Itcast_p2p_20191228























#  JMeter实现测试脚本

![image-20240918131216272](E:\Software-Testing\软件测试\接口测试\img\image-20240918131216272.png)

![image-20240918140729058](E:\Software-Testing\软件测试\接口测试\img\image-20240918140729058.png)
